#include "Data.h"
#include "Globals.h"
#include "Hardware/FLASH.h"


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
static DataSettings *pDS = 0;           // Указатель на параметры рисуемого сигнала
static uint8* dataChan[2] = {0, 0};     // Указатели на данные рисуемого сигнала

static DataSettings *pDSInt = 0;        // | Здесь данные из ППЗУ, которые должны выводиться на экран
static uint8 *dataChanInt[2] = {0, 0};  //-/

static DataSettings *pDSLast = 0;
static uint8 *dataChanLast[2] = {0, 0};

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void Data_GetFromIntMemory(void)
{
    FLASH_GetData(gMemory.currentNumIntSignal, &pDSInt, &dataChanInt[A], &dataChanInt[B]);
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
DataSettings* Data_DSInt(void)
{
    return pDSInt;
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
DataSettings** Data_pDSInt(void)
{
    return &pDSInt;
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
uint8* Data_ChInt(Channel ch)
{
    return dataChanInt[ch];
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
uint8** Data_pChInt(Channel ch)
{
    return &(dataChanInt[ch]);
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
DataSettings* Data_DS(void)
{
    return pDS;
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
DataSettings** Data_pDS(void)
{
    return &pDS;
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
uint8* Data_ChDS(Channel ch)
{
    return dataChan[ch];
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
uint8** Data_pChDS(Channel ch)
{
    return &(dataChan[ch]);
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
void Data_GetAverageFromDataStorage(void)
{
    dataChan[A] = DS_GetAverageData(A);
    dataChan[B] = DS_GetAverageData(B);
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
DataSettings* Data_DSLast(void)
{
    return pDSLast;
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
DataSettings** Data_pDSLast(void)
{
    return &pDSLast;
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
uint8* Data_ChLast(Channel ch)
{
    return dataChanLast[ch];
}

//----------------------------------------------------------------------------------------------------------------------------------------------------
uint8** Data_pChLast(Channel ch)
{
    return &(dataChanLast[ch]);
}
